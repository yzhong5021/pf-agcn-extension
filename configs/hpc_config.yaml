# HPC-centric Hydra config preset.

defaults:
  - data_config: cafa
  - task: pf_agcn
  - model: pf_agcn_compact
  - train@_here_: train_default
  - hpo: optuna_search
  - system: hpc_supercloud
  - _self_

experiment_name: "pfagcn_supercloud"
run_name: "pf-agcn-hpc"

training:
  devices: 1
  accelerator: gpu
  precision: 16
  log_interval: 20
  num_nodes: 1

data_config:
  sources:
    seqs_path: ${system.paths.data_root}/raw/train_sequences.fasta
    terms_path: ${system.paths.data_root}/raw/train_terms.tsv
    ia_path: ${system.paths.data_root}/raw/ia.txt
    go_path: ${system.paths.data_root}/ontology/go-basic.obo
  train_manifest: ${system.paths.cache_dir}/manifests/train_manifest.json
  val_manifest: ${system.paths.cache_dir}/manifests/val_manifest.json
  test_manifest: ${system.paths.cache_dir}/manifests/test_manifest.json
  batch_size: 32
  num_workers: 16
  pin_memory: true

evaluation:
  metric: 
  - fmax
  - 
  val_interval: 1
  threshold_grid: [0.1, 0.3, 0.5, 0.7]

hydra:
  run:
    dir: ${system.paths.results_root}/runs/${now:%Y%m%d-%H%M%S}
  job:
    chdir: true
  sweep:
    dir: ${system.paths.results_root}/sweeps/${now:%Y%m%d}
    subdir: ${now:%H%M%S}
